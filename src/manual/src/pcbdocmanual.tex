
\documentclass[11pt]{article}

\usepackage{polyglossia}
\usepackage{fontspec}
\usepackage{xunicode}
\usepackage{xltxtra}
\usepackage{tikz}
\usepackage{longtable}
\usepackage[pdftex,usenames]{colortbl}
\usepackage{listings}
\usetikzlibrary{matrix}

\setdefaultlanguage{russian}
\setotherlanguage{english}
%\newfontfamily\sffont{Fira Sans OT}[Scale=0.9]
\newfontfamily\sffont{Fira Sans}[Scale=0.9]

\definecolor{terminalcolor}{rgb}{0.7, 0.75, 0.71}
\definecolor{codecolor}{rgb}{0.84, 0.86, 0.86}
\definecolor{resultcolor}{rgb}{0.8784,0.8784,0.7647}

\definecolor{Blue}{cmyk}{1,1,0,0}
\definecolor{MidnightBlue}{cmyk}{0.98,0.13,0,0.43}
\definecolor{NavyBlue}{cmyk}{0.94,0.54,0,0}
\definecolor{RoyalBlue}{cmyk}{1,0.50,0,0}

%% fonts
\newfontfamily\cyrillicfont
[
  ItalicFont=Liberation Serif Italic,
  BoldFont=Liberation Serif Bold,
  BoldItalicFont=Liberation Serif Bold Italic
]{Computer Modern Concrete Roman}

\newfontfamily\cyrillicfonttt
[
  ItalicFont=CMU Typewriter Text Italic,
  BoldFont=CMU Typewriter Text Bold
]{CMU Typewriter Text}
%{Nimbus Mono L}[Scale=0.9]
\newfontfamily\cyrillicfontsf
[
  %Scale=0.9,
  %BoldFont=Fira Sans OT Medium,
  %BoldItalicFont=Fira Sans OT Medium Italic
  BoldItalicFont=Fira Sans Medium Italic
]
%{Fira Sans OT}
{Fira Sans}

\newcommand{\normalfontresult}{\fontspec[Scale=1.0]{GOST Type AU}}%
\newcommand{\normalfontitresult}{\fontspec[Scale=1.0]{GOST type A}\itshape}%
\newcommand{\smallresult}{\fontspec[Scale=0.75]{GOST Type AU}}%
\newcommand{\smallitresult}{\fontspec[Scale=0.75]{GOST type A}\itshape}%
\newcommand{\largeresult}{\fontspec[Scale=1.3]{GOST Type AU}}%
\newcommand{\llargeresult}{\fontspec[Scale=1.2]{GOST Type AU}}%
\newcommand{\Largeresult}{\fontspec[Scale=1.75]{GOST Type AU}}%
\newcommand{\LLargeresult}{\fontspec[Scale=1.65]{GOST Type AU}}%
\newcommand{\largeitresult}{\fontspec[Scale=1.3]{GOST type A}\itshape}%
\newcommand{\llargeitresult}{\fontspec[Scale=1.2]{GOST type A}\itshape}%
\newcommand{\Largeitresult}{\fontspec[Scale=1.75]{GOST type A}\itshape}%
\newcommand{\LLargeitresult}{\fontspec[Scale=1.65]{GOST type A}\itshape}%
\usepackage[font={sf,bf,normalsize},labelsep=period]{caption}
\usepackage[sf,bf,big]{titlesec}
\usepackage{topcapt}

%% geometry
\setlength{\arrayrulewidth}{0.3mm}
\setlength{\extrarowheight}{1mm}
\setlength\doublerulesep{-0.1pt}
\setlength{\hoffset}{0mm}
\setlength{\voffset}{-5mm}
\setlength{\oddsidemargin}{12.7mm}
\setlength{\textwidth}{148mm}
\setlength{\topmargin}{0mm}
\setlength{\headsep}{20pt}
\setlength{\textheight}{210mm}
%\setlength{\parskip}{1mm}
\setlength{\footskip}{10mm}
\setlength{\parindent}{0pt}
\setlength{\parskip}{1.6ex plus 0.4ex minus 0.4ex}

\renewcommand{\sf}[1]%
{{\fontspec[Scale=0.9]{Fira Sans OT}\mbox{#1}}}
\newcommand{\sfemph}[1]%
  {{\mdseries\fontspec[Scale=0.9]{Fira Sans Italic}\mbox{#1}}}
\newcommand{\bfemph}[1]%
  {{\fontspec[Scale=0.9]{Fira Sans Medium Italic}\mbox{#1}}}
\newcommand{\bfsf}[1]%
  {{\fontspec[Scale=0.9]{Fira Sans Medium}\mbox{#1}}}
\newcommand{\bftt}[1]%
  {\texttt{\bfseries{}\mbox{#1}}}
\newcommand{\pcbdocmanualcode}[1]{%
  \begin{tikzpicture}\node[align=left,fill=codecolor,font=\ttfamily] at (0,0){#1};%
  \end{tikzpicture}%
  }%
\newcommand{\pcbdocmanualterminal}[1]{%
  \begin{tikzpicture}\node[align=left,fill=terminalcolor,font=\ttfamily] at (0,0){#1};%
  \end{tikzpicture}%
  }%
\newcommand{\pcbdocmanualresult}[1]{%
  \begin{tikzpicture}\node[align=left,fill=resultcolor,font=\ttfamily] at (0,0){#1};%
  \end{tikzpicture}%
  }%

\lstdefinelanguage{pcbdoc}{
  morekeywords={
    \documentclass,
    \AuthorSet,
    \CheckerSet,
    \NormControllerSet,
    \NameSet,
    \NumberSet,
    \begin,
    \end,
    \Part,
    \Element,
    \small,
    \smallit,
    \normalfont,
    \normalfontit,
    \llarge,
    \llargeit,
    \large,
    \largeit,
    \LLarge,
    \LLargeit,
    \Large,
    \Largeit,
    \fontspec,
    \itshape,
    \ScaleSet,
    \TechControllerSet,
    \ApproverSet,
    \PcbNumberSet,
    \PcbMaterialSet,
    \PrimaryUseSet,
    \newpage,
    \refbox,
    \plusminus
  },
  otherkeywords={[,],\\,\{,\}},
  sensitive=true,
}

\lstnewenvironment{pcbdoccode}[1][0pt]{%
  \lstset{%
    language=pcbdoc,%
    inputencoding=utf8x,%
    keepspaces=true,%
    escapechar=\$,%
    basicstyle=\ttfamily\color{black},%
    keywordstyle=\color{Blue}\ttfamily\bfseries,%
    identifierstyle=\color{black}\ttfamily,%
    commentstyle=\color{black}\ttfamily,%
    stringstyle=\color{red}\ttfamily,%
    backgroundcolor=\color{codecolor},%
    xrightmargin=#1%
  }%
}{}

\lstnewenvironment{pcbdoccode1}{%
  \lstset{%
    language=pcbdoc,%
    inputencoding=utf8x,%
    keepspaces=true,%
    escapechar=\$,%
    basicstyle=\ttfamily\color{black},%
    keywordstyle=\color{Blue}\ttfamily\bfseries,%
    identifierstyle=\color{black}\ttfamily,%
    commentstyle=\color{black}\ttfamily,%
    stringstyle=\color{red}\ttfamily,%
  }%
}{}

%\newcommand{\tabularcaption}[1]{\hfill\sffamily\bfseries\normalfont#1\hfill}
\usepackage{myspikes}


\begin{document}

\title{Pbbdoc. Руководство пользователя}
%\maketitle

\begin{titlepage}
\begin{tikzpicture}[overlay]
\draw[top color=codecolor,middle color=gray,bottom color=gray]%
 (-40mm,40mm) rectangle (180mm,-250mm);
\node at(70mm,-80mm){\huge\sffamily\bfseries{}PCBDOC v0.4};
\node at(70mm,-100mm){\LARGE\sffamily\bfseries{}Руководство пользователя};
\end{tikzpicture}

\end{titlepage}

\input ./src/introduction.tex\newpage
\input ./src/install.tex\newpage
\input ./src/tutorial.tex\newpage
\input ./src/options.tex\newpage
\input ./src/fonts.tex\newpage
\input ./src/fields.tex\newpage
\input ./src/elementlist.tex\newpage
\input ./src/specification.tex\newpage
%\input ./src/temporary.tex\newpage
\tableofcontents

\end{document}
